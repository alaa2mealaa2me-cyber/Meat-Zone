<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>AI Letter Assistant</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Cairo',sans-serif;
  background:#f7f9fb;
}
#aiBot{
  position:fixed;
  right:20px;
  top:20px;
  width:320px;
  height:520px;
  background:white;
  border-radius:25px;
  box-shadow:0 6px 20px rgba(0,0,0,.2);
  display:flex;
  flex-direction:column;
}
#aiHeader{
  background:#1E8449;
  color:white;
  padding:15px;
  text-align:center;
  font-size:18px;
  border-radius:25px 25px 0 0;
}
#messages{
  flex:1;
  padding:12px;
  overflow-y:auto;
}
.msg{
  background:#eef3ff;
  padding:8px;
  border-radius:12px;
  margin-bottom:8px;
}
#controls{
  display:flex;
  gap:5px;
  padding:10px;
}
#controls input{
  flex:1;
  padding:8px;
  border-radius:10px;
  border:1px solid #ccc;
}
#controls button{
  border:none;
  border-radius:10px;
  padding:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="aiBot">
  <div id="aiHeader">ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø°ÙƒÙŠ</div>

  <div id="messages">
    <div class="msg">ğŸ§ ØªØ­Ø¯Ø« Ø£Ùˆ Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ù† Ø§Ù„Ù†Ø´Ø§Ø·</div>
  </div>

  <div id="controls">
    <button onclick="startMic()">ğŸ¤</button>
    <input id="textInput" placeholder="Ø£Ùˆ Ø§ÙƒØªØ¨ Ù‡Ù†Ø§">
    <button onclick="processInput()">â¡</button>
  </div>
</div>

  <script>
/* ğŸ§  Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ØªØ±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¹ ÙƒÙˆØ¯Ùƒ) */
const letterRules = {
  "Ø«": ["Ø«Ø¹Ù„Ø¨"],
  "Ø­": ["Ø­ØµØ§Ù†"],
  "Ø¸": ["Ø¸Ø±Ù"],
  "Ø¨": ["Ø¨Ø·Ø©"],
  "Øª": ["ØªÙØ§Ø­Ø©"],
  "Ø´": ["Ø´Ù…Ø³"],
  "Ø·": ["Ø·Ø±ÙŠÙ‚"],
  "Ù…": ["Ù…ÙˆØ²"],
  "Ø²": ["Ø²Ø±Ø§ÙØ©"],
  "Ø°": ["Ø°Ø¨Ø§Ø¨"],
  "Ø¯": ["Ø¯Ø¨"],
  "Ù†": ["Ù†Ù…Ø±"],
  "Ø³": ["Ø³ÙŠØ§Ø±Ø©"]
};

/* ğŸ§  Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠØ© (ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ Ù…Ù† ØµÙØ­ØªÙƒ) */
let currentLetter = "Ø«";

/* ğŸ¤ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø§ÙŠÙƒ */
function startMic(){
  const rec = new (window.SpeechRecognition||window.webkitSpeechRecognition)();
  rec.lang="ar-SA";
  rec.start();
  rec.onresult=e=>{
    document.getElementById("textInput").value=e.results[0][0].transcript;
    processInput();
  }
}

/* ğŸ§  ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© */
function processInput(){
  const text = document.getElementById("textInput").value.trim();
  if(!text) return;

  addMsg("ğŸ§’ "+text);

  let reply="";
  let correctWords = letterRules[currentLetter] || [];

  if(correctWords.includes(text)){
    reply="Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ù‹Ø§! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©ØŒ Ø£Ø­Ø³Ù†Øª!";
  }else{
    reply="Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
  }

  addMsg("ğŸ¤– "+reply);
  speak(reply);
  document.getElementById("textInput").value="";
}

/* ğŸ’¬ Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
function addMsg(msg){
  const box=document.getElementById("messages");
  const d=document.createElement("div");
  d.className="msg";
  d.innerText=msg;
  box.appendChild(d);
  box.scrollTop=box.scrollHeight;
}

/* ğŸ”Š ØµÙˆØª Ø§Ù„Ø±Ø¯ */
function speak(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="ar-SA";
  speechSynthesis.speak(u);
}

/* ğŸ”— Ø¯Ø§Ù„Ø© ØªØ±Ø¨Ø· Ù…Ø¹ ØµÙØ­ØªÙƒ */
window.setCurrentLetter = function(letter){
  currentLetter = letter;
}
</script>

</body>
</html>
